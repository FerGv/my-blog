<!DOCTYPE html>
<html lang="es-MX">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Contexto de ejecución (apply, call, bind) | FerGv blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/favicon.svg">
    <meta name="description" content="Mi blog personal">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.267681cf.css" as="style"><link rel="preload" href="/assets/js/app.5f5108ff.js" as="script"><link rel="preload" href="/assets/js/2.e7ba44f5.js" as="script"><link rel="preload" href="/assets/js/15.a942adc4.js" as="script"><link rel="prefetch" href="/assets/js/10.e4a05533.js"><link rel="prefetch" href="/assets/js/11.7559ae17.js"><link rel="prefetch" href="/assets/js/12.f7e201a6.js"><link rel="prefetch" href="/assets/js/13.07587627.js"><link rel="prefetch" href="/assets/js/14.0b69dfcc.js"><link rel="prefetch" href="/assets/js/16.75c34398.js"><link rel="prefetch" href="/assets/js/17.cbd4e8f7.js"><link rel="prefetch" href="/assets/js/18.65179107.js"><link rel="prefetch" href="/assets/js/19.9e81157c.js"><link rel="prefetch" href="/assets/js/20.d1b20f7f.js"><link rel="prefetch" href="/assets/js/21.1e5bde8a.js"><link rel="prefetch" href="/assets/js/22.8b6818e5.js"><link rel="prefetch" href="/assets/js/23.a51b2b75.js"><link rel="prefetch" href="/assets/js/24.176be1e1.js"><link rel="prefetch" href="/assets/js/25.3419cb19.js"><link rel="prefetch" href="/assets/js/26.2ecaa319.js"><link rel="prefetch" href="/assets/js/27.fc413896.js"><link rel="prefetch" href="/assets/js/28.7eab97c8.js"><link rel="prefetch" href="/assets/js/3.7b5bba89.js"><link rel="prefetch" href="/assets/js/4.e3d78bee.js"><link rel="prefetch" href="/assets/js/5.032c7d4c.js"><link rel="prefetch" href="/assets/js/6.2c98a8ae.js"><link rel="prefetch" href="/assets/js/7.fcc35acc.js"><link rel="prefetch" href="/assets/js/8.72d646d5.js"><link rel="prefetch" href="/assets/js/9.3423a274.js">
    <link rel="stylesheet" href="/assets/css/0.styles.267681cf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">FerGv blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://fergv.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fergv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Idiomas" class="dropdown-title"><span class="title">Idiomas</span> <span class="arrow down"></span></button> <button type="button" aria-label="Idiomas" class="mobile-dropdown-title"><span class="title">Idiomas</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/context/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Español
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/fergv/my-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://fergv.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fergv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Idiomas" class="dropdown-title"><span class="title">Idiomas</span> <span class="arrow down"></span></button> <button type="button" aria-label="Idiomas" class="mobile-dropdown-title"><span class="title">Idiomas</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/context/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Español
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/fergv/my-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Inicio</a></li><li><a href="/welcome/" class="sidebar-link">Bienvenid@</a></li><li><a href="/state-of-js-2020/" class="sidebar-link">State of JS 2020: Typescript y Svelte</a></li><li><a href="/bang-bang-operator/" class="sidebar-link">Operador Bang Bang (Valores Falsy/Truthy)</a></li><li><a href="/array-methods/" class="sidebar-link">Métodos de arreglos</a></li><li><a href="/var-let-const/" class="sidebar-link">Var, let, const</a></li><li><a href="/reference-vs-value/" class="sidebar-link">Por referencia vs por valor</a></li><li><a href="/callback-hell/" class="sidebar-link">Infierno de Callbacks (Promesas y async/await)</a></li><li><a href="/environment-variables/" class="sidebar-link">Variables de entorno</a></li><li><a href="/context/" aria-current="page" class="active sidebar-link">Contexto de ejecución (apply, call, bind)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/context/#call-apply" class="sidebar-link">Call / Apply</a></li><li class="sidebar-sub-header"><a href="/context/#bind" class="sidebar-link">Bind</a></li><li class="sidebar-sub-header"><a href="/context/#conclusion" class="sidebar-link">Conclusión</a></li></ul></li><li><a href="/es6-features/" class="sidebar-link">ES6+ características (Parte 1)</a></li><li><a href="/best-practices/" class="sidebar-link">Buenas prácticas</a></li><li><a href="/jquery/" class="sidebar-link">jQuery</a></li><li><a href="/regex/" class="sidebar-link">Expresiones regulares (Regex)</a></li><li><a href="/fetch/" class="sidebar-link">Fetch (Consumiendo APIs)</a></li><li><a href="/babel/" class="sidebar-link">Babel</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="contexto-de-ejecucion-apply-call-bind"><a href="#contexto-de-ejecucion-apply-call-bind" class="header-anchor">#</a> Contexto de ejecución (apply, call, bind)</h1> <p>Recientemente en mi trabajo estaba desarrollando un proyecto, en el cual tenía que conectarme a una carpeta compartida en un Windows Server para obtener unos archivos que se enviarían como adjuntos en un correo. Para esta conexión, utilicé <a href="https://www.npmjs.com/package/smb2" target="_blank" rel="noopener noreferrer">smb2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> pero esta librería trabaja con callbacks y en lo personal no me gusta esta forma (ya hablé acerca de esto en mi artículo <a href="/callback-hell/">&quot;Infierno de Callbacks (Promesas y async/await)&quot;</a>).</p> <p><img src="/assets/img/programming.42587034.gif" alt="Programming"></p> <p>Así que traté de utilizar <a href="https://www.npmjs.com/package/es6-promisify" target="_blank" rel="noopener noreferrer">es6-promisify<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> para convertir los callbacks en promesas. Siguiendo la documentación de las dos librerías llegué a este código:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> smb2Client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SMB2</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  share<span class="token operator">:</span> config<span class="token punctuation">.</span>samba<span class="token punctuation">.</span>share<span class="token punctuation">,</span>
  domain<span class="token operator">:</span> config<span class="token punctuation">.</span>samba<span class="token punctuation">.</span>domain<span class="token punctuation">,</span>
  username<span class="token operator">:</span> config<span class="token punctuation">.</span>samba<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
  password<span class="token operator">:</span> config<span class="token punctuation">.</span>samba<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> existsPromise <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>smb2Client<span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> readFilePromise <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>smb2Client<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Revisa mi artículo sobre <a href="/environment-variables/">variables de entorno</a> para aprender algunas buenas prácticas sobre cómo trabajar con ellas dentro de un proyecto JS.</p></div> <p>Pero cuando mandaba a llamar mis nuevas funciones, siempre obtenía un error y no entendía el porqué hasta que leyendo la documentación de <strong>es6-promisify</strong> encontré una parte que hablaba de <a href="https://www.npmjs.com/package/es6-promisify#promisify-methods" target="_blank" rel="noopener noreferrer">métodos<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> promisify <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'es6-promisify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a promise-based version of send_command</span>
<span class="token keyword">const</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redis'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>redis<span class="token punctuation">.</span><span class="token function">send_command</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>redis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Tomado de la <a href="https://www.npmjs.com/package/es6-promisify#promisify-methods" target="_blank" rel="noopener noreferrer">documentación oficial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <p>Entonces entendí que el <strong>contexto de ejecución</strong> era la respuesta. Este término hace referencia al &quot;lugar&quot; donde se manda a llamar la función y al cual accedemos a través de la palabra <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener noreferrer">this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Para entender mejor, veamos un ejemplo:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">saludar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hola </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>nombre<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> miContexto <span class="token operator">=</span> <span class="token punctuation">{</span>
  nombre<span class="token operator">:</span> <span class="token string">'Fer'</span><span class="token punctuation">,</span>
  saludar<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">saludar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// -&gt; 'Hola undefined'</span>
miContexto<span class="token punctuation">.</span><span class="token function">saludar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// -&gt; 'Hola Fer'</span>
</code></pre></div><p>Verás que la misma función regresa valores diferentes dependiendo cómo se manda a llamar. Cuando se ejecuta solita <code>saludar()</code>, toma el contexto global que en este caso es <a href="https://developer.mozilla.org/es/docs/Web/API/Window" target="_blank" rel="noopener noreferrer">Window<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> y por eso no encuentra la propiedad <strong>nombre</strong>. En cambio, al llamar a la función anteponiendo <code>miContexto.saludar()</code> ya le estamos indicando que ese objeto será el contexto de ejecución y ahí sí está definida la propiedad <strong>nombre</strong>.</p> <p>Existen varias maneras de indicarle el contexto de ejecución a JS pero hoy solo veremos 3 de ellas usando métodos que toda función posee.</p> <h2 id="call-apply"><a href="#call-apply" class="header-anchor">#</a> <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">Call<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> / <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer">Apply<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p><code>Call</code> y <code>apply</code> nos permiten indicar el contexto de ejecución <strong>explícitamente</strong> ya que se lo pasamos como argumento. Los dos métodos se comportan de manera muy similar, su principal diferencia es el cómo reciben los argumentos que serán usados en la función a ejecutar.</p> <p>Modificaremos nuestro ejemplo para usar estos métodos:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">saludar</span><span class="token punctuation">(</span><span class="token parameter">saludo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>saludo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>nombre<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> miContexto <span class="token operator">=</span> <span class="token punctuation">{</span>
  nombre<span class="token operator">:</span> <span class="token string">'Fer'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">saludar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>miContexto<span class="token punctuation">,</span> <span class="token string">'Hola con call'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// -&gt; 'Hola con call, Fer'</span>
<span class="token function">saludar</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>miContexto<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Hola con apply'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// -&gt; 'Hola con apply, Fer'</span>
</code></pre></div><p>El primer parámetro de los dos métodos es el contexto que será utilizado para la ejecución. El resto de parámetros se refieren a los argumentos que se pasarán. La diferencia es que <code>apply</code> recibe un arreglo con los argumentos y <code>call</code> recibe cada argumento individualmente.</p> <h2 id="bind"><a href="#bind" class="header-anchor">#</a> <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener noreferrer">Bind<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p><code>Bind</code> funciona diferente a los dos anteriores métodos porque no ejecuta la función en el momento, en lugar de eso retorna una nueva función pero ligada al contexto que le indiquemos. Y este contexto ya no se puede cambiar de ninguna manera.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">saludar</span><span class="token punctuation">(</span><span class="token parameter">saludo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>saludo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>nombre<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> miContexto <span class="token operator">=</span> <span class="token punctuation">{</span>
  nombre<span class="token operator">:</span> <span class="token string">'Fer'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> saludarConContexto <span class="token operator">=</span> <span class="token function">saludar</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>miContexto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">saludarConContexto</span><span class="token punctuation">(</span><span class="token string">'Hola con bind'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// -&gt; 'Hola con bind, Fer'</span>
</code></pre></div><p>Con esta información ahora sí podemos entender la documentación. Lo modificaré un poquito para que sea más claro:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redis'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>redis<span class="token punctuation">.</span><span class="token function">send_command</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>redis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Equivalente a:</span>
<span class="token keyword">const</span> contexto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redis'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token number">6379</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sendCommandConContexto <span class="token operator">=</span> contexto<span class="token punctuation">.</span><span class="token function">send_command</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>contexto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sendCommandPromise <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>sendCommandConContexto<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El truco es que para convertir un método de un objeto en una promesa debemos ligar ese objeto como contexto. De esta manera no perderemos el contexto correcto en el que queremos que se ejecute.</p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusión</h2> <p>No te preocupes si esto no tiene mucho sentido para ti en este momento, entender el <strong>contexto de ejecución (this)</strong> es de los temas más difíciles de JS y requiere su tiempo. Con la práctica lo entenderás 😉.</p> <p>Nos vemos la próxima. Happy coding! 🥸</p> <!----></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fergv/my-blog/edit/master/src/context/README.md" target="_blank" rel="noopener noreferrer">Editar esta página en GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Última actualización:</span> <span class="time">3/13/2021, 9:27:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/environment-variables/" class="prev">
        Variables de entorno
      </a></span> <span class="next"><a href="/es6-features/">
        ES6+ características (Parte 1)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5f5108ff.js" defer></script><script src="/assets/js/2.e7ba44f5.js" defer></script><script src="/assets/js/15.a942adc4.js" defer></script>
  </body>
</html>
